{% extends 'base.html' %}
{% load static %}

{% block title %}All Tags - Blog{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="container">
    <div class="tags-header">
        <h1 class="page-title">
            <i class="fas fa-tags"></i> All Tags
        </h1>
        <p class="tags-description">
            Browse posts by topic. Click on any tag to see related posts.
        </p>
    </div>

    {% if tag_data %}
        <div class="tags-cloud">
            {% for item in tag_data %}
                <div class="tag-item">
                    <a href="{% url 'blog:posts-by-tag' item.tag.name %}" class="tag-card">
                        <div class="tag-content">
                            <h3 class="tag-name">
                                <i class="fas fa-tag"></i> {{ item.tag.name }}
                            </h3>
                            <div class="tag-stats">
                                <span class="post-count">
                                    {{ item.post_count }} post{{ item.post_count|pluralize }}
                                </span>
                                <span class="tag-date">
                                    Created {{ item.tag.created_at|date:"M d, Y" }}
                                </span>
                            </div>
                        </div>
                        <div class="tag-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>

        <div class="tags-stats">
            <div class="stats-card">
                <h3>Tag Statistics</h3>
                <ul>
                    <li><strong>Total Tags:</strong> {{ tag_data|length }}</li>
                    <li><strong>Most Popular:</strong> 
                        {% for item in tag_data %}
                            {% if forloop.first %}
                                {{ item.tag.name }} ({{ item.post_count }} posts)
                            {% endif %}
                        {% endfor %}
                    </li>
                </ul>
            </div>
        </div>
    {% else %}
        <div class="no-tags">
            <div class="empty-state">
                <i class="fas fa-tags fa-3x"></i>
                <h3>No Tags Yet</h3>
                <p>No tags have been created yet. Tags will appear here once posts are tagged.</p>
                {% if user.is_authenticated %}
                    <a href="{% url 'blog:post-create' %}" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Create Your First Post
                    </a>
                {% endif %}
            </div>
        </div>
    {% endif %}

    <div class="tags-actions">
        <a href="{% url 'blog:post-list' %}" class="btn btn-outline">
            <i class="fas fa-list"></i> All Posts
        </a>
        {% if user.is_authenticated %}
            <a href="{% url 'blog:post-create' %}" class="btn btn-primary">
                <i class="fas fa-plus"></i> New Post
            </a>
        {% endif %}
    </div>
</div>

<style>
.tags-cloud {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
    margin: 2rem 0;
}

.tag-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
    background: white;
}

.tag-card:hover {
    border-color: #007bff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transform: translateY(-2px);
    text-decoration: none;
    color: inherit;
}

.tag-content {
    flex: 1;
}

.tag-name {
    margin: 0 0 0.5rem 0;
    color: #333;
    font-size: 1.1rem;
}

.tag-stats {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.post-count {
    font-weight: bold;
    color: #007bff;
}

.tag-date {
    font-size: 0.9rem;
    color: #666;
}

.tag-arrow {
    color: #007bff;
    font-size: 1.2rem;
}

.tags-stats {
    margin: 2rem 0;
}

.stats-card {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.stats-card h3 {
    margin-top: 0;
    color: #333;
}

.stats-card ul {
    list-style: none;
    padding: 0;
    margin: 1rem 0 0 0;
}

.stats-card li {
    padding: 0.5rem 0;
    border-bottom: 1px solid #e9ecef;
}

.stats-card li:last-child {
    border-bottom: none;
}
</style>
{% endblock %}
